---
title: 数组
date: 2021-05-19 19:57:36
tags:
- 数组
- 数据结构
- 算法
categories:
- 数据结构与算法
---
想写一篇数组的文章作为数据结构的开始。
<!-- more -->

## 数据结构中的数组
数组是有限个相同类型的变量所组成的有序集合。
### 数组的操作
#### 创建
创建数组时，先指定数组的容量大小，然后根据大小分配内存，数组在内存中**顺序存储**。
#### 读取
数组中的每一个元素都有一个下标，下标从0开始，如果下标超过数组的末尾的下标，就会发生数组越界。算法复杂度为O(1)。
##### 数组的下标为什么从0开始
从数组中存储的数据模型来看，下标最精确的意思是**偏移量**，a[0]的偏移量是0，即为首地址。a[i]的偏移量是i，寻址公式就是
`a[i]_address = base_address + i*data_type_size`
如果下标从1开始，那对应的寻址公式
`a[i]_address = base_address + （i-1）*data_type_size`
对CPU来说，每次随机访问，就多了一次运算，多发一条指令。
#### 更新
利用下标赋值，算法复杂度为O(1)。
#### 插入
算法复杂度为O(n),插入操作会把插入点后面的元素都向后移动一位。
#### 删除
算法复杂度为O(n),删除操作会把删除点后面的元素都向前移动一位。
### 动态数组
因为数组在创建的时候会预先分配内存，在数组没有填满的时候，数组的空间效率很低，为了解决这个问题，人们发明了动态数组。
所谓的动态数组就是为了**避免内存浪费**，先预先为数组开辟较小的内存空间，当添加的数组超过数组的长度的时候，再创建一个新的数组，新数组的长度是老数组的n（一般为2）倍，把老数组的数组复制到新数组中，然后释放掉老数组的内存。
这样就能保证内存的合理运用，但是每次扩容都会有大量的额外操作，会降低时间性能。
## V8引擎中的JavaScript数组
V8中的js数组在不同的条件下会使用不同的模式：**Fast Elements**，**Dictionary Elements**和**Dictionary Element**
